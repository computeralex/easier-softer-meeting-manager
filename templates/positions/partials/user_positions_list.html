{# Partial: List of user's current position assignments with star toggle #}
{% if assignments %}
<table class="table table-hover mb-0">
    <thead class="table-light">
        <tr>
            <th>Position</th>
            <th class="text-center" title="Click star to set as primary position">Primary Role</th>
            <th>Started</th>
            <th class="text-end">Actions</th>
        </tr>
    </thead>
    <tbody>
        {% for assignment in assignments %}
        <tr>
            <td>
                <a href="{% url 'positions:detail' assignment.position.pk %}" class="text-decoration-none">
                    {{ assignment.position.display_name }}
                </a>
            </td>
            <td class="text-center">
                <button type="button"
                        class="btn btn-sm btn-link p-0 star-toggle"
                        hx-post="{% url 'positions:toggle_primary' assignment.pk %}"
                        hx-target="#positions-container"
                        hx-swap="innerHTML"
                        title="{% if assignment.is_primary %}This is the primary position (click to make secondary){% else %}Click to make this the primary position{% endif %}">
                    {% if assignment.is_primary %}
                    <i class="bi bi-star-fill text-warning fs-5"></i>
                    {% else %}
                    <i class="bi bi-star text-muted fs-5"></i>
                    {% endif %}
                </button>
            </td>
            <td>
                <span class="text-muted small">{{ assignment.start_date|date:"M j, Y" }}</span>
            </td>
            <td class="text-end">
                <a href="{% url 'positions:end_term' assignment.position.pk assignment.pk %}"
                   class="btn btn-sm btn-outline-secondary"
                   title="End term">
                    <i class="bi bi-calendar-x"></i>
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="p-4 text-center text-muted">
    <i class="bi bi-person-badge fs-1 mb-2 d-block opacity-50"></i>
    <p class="mb-0">No positions assigned.</p>
</div>
{% endif %}
